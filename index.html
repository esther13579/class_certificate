<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çç‹€ç”¢ç”Ÿå™¨</title>
    
    <!-- â˜…â˜…â˜… é—œéµä¿®å¾©ï¼šè§£æ±º GitHub Pages è·¯å¾‘éŒ¯èª¤å•é¡Œ â˜…â˜…â˜… -->
    <base href=".">
    
    <!-- 1. è¼‰å…¥ Tailwind CSS (æ¨£å¼åº«) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. è¼‰å…¥ React æ ¸å¿ƒ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 3. è¼‰å…¥ Babel (è®“ç€è¦½å™¨çœ‹å¾—æ‡‚ React) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- è¨­å®šå­—é«” -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Serif+TC:wght@400;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .font-serif { font-family: 'Noto Serif TC', serif; }
        .font-mono { font-family: monospace; }
        
        /* å‹•ç•«æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        // --- 0. åœ–æ¨™å…ƒä»¶åº« (å…§å»º SVG) ---
        const Icons = {
            User: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            Users: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            Calendar: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
            Type: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/></svg>,
            BookOpen: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
            FileText: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>,
            Upload: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>,
            ChevronLeft: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="15 18 9 12 15 6"/></svg>,
            ChevronRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="9 18 15 12 9 6"/></svg>,
            Sparkles: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3z"/></svg>,
            Copy: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>,
            Layout: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>,
            CheckCircle: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            ImageIcon: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>,
            Download: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>,
            DownloadCloud: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><polyline points="12 12 12 21"/><polyline points="8 17 12 21 16 17"/></svg>,
            ArrowRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
            Gift: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="20 12 20 22 4 22 4 12"/><rect x="2" y="7" width="20" height="5"/><line x1="12" y1="22" x2="12" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/></svg>
        };

        const { useState, useEffect, useRef } = React;

        const FlipAwardGenerator = () => {
            const [mode, setMode] = useState('single'); 
            const [teacherName, setTeacherName] = useState('ç‹å°æ˜ è€å¸«');
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]); 

            const [studentName, setStudentName] = useState('å¼µå°ç¾');
            const [awardTitle, setAwardTitle] = useState('é–±è®€å°åšå£«');
            const [comment, setComment] = useState('é€™å­¸æœŸä¸»å‹•é–±è®€äº† 50 æœ¬æ›¸ï¼Œä¸¦æ¨‚æ–¼èˆ‡åŒå­¸åˆ†äº«å¿ƒå¾—ï¼Œé€™ä»½ç†±æƒ…å€¼å¾—å˜‰è¨±ï¼');
            const [showPresets, setShowPresets] = useState(false);
            
            const [batchData, setBatchData] = useState([]); 
            const [currentBatchIndex, setCurrentBatchIndex] = useState(0);
            const [csvInput, setCsvInput] = useState('');

            const [aiPrompt, setAiPrompt] = useState('');

            const [selectedTemplate, setSelectedTemplate] = useState('classic');
            const canvasRef = useRef(null);

            // --- å®Œæ•´ 30 æ¬¾ PDF çé …è³‡æ–™åº« (æ ¹æ“šæ‚¨æä¾›çš„ PDF å…§å®¹æå–) ---
            const presetAwards = [
                // å€‹äººç‰¹è³ª
                { category: 'å€‹äººç‰¹è³ª', title: 'æ°¸ä¸æ”¾æ£„ç', text: 'åœ¨å›°é›£æˆ–æŒ‘æˆ°é¢å‰å¾ä¸æ°£é¤’ï¼ŒæŒä¹‹ä»¥æ†ï¼Œå …æŒä¸æ‡ˆï¼Œå±•ç¾å‡ºè‰²çš„æ¯…åŠ›å’Œå …éŸŒç²¾ç¥ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å€‹äººç‰¹è³ª', title: 'éˆæ„Ÿå•Ÿè’™ç', text: 'åœ¨æ¿€ç™¼åŒå­¸å­¸ç¿’èˆˆè¶£ã€åˆ†äº«çŸ¥è­˜æˆ–é¼“å‹µä»–äººæ–¹é¢æœ‰å“è¶Šè¡¨ç¾ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å€‹äººç‰¹è³ª', title: 'ç©æ¥µåƒèˆ‡ç', text: 'å…¨å¹´ç©æ¥µåƒèˆ‡èª²å ‚ã€èª²å¤–æ´»å‹•ï¼Œç‚ºç­ç´šåšå‡ºè²¢ç»ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å€‹äººç‰¹è³ª', title: 'è‡ªæˆ‘ç®¡ç†ç', text: 'åœ¨è‡ªæˆ‘ç®¡ç†ã€æ™‚é–“è¦åŠƒæˆ–ç›®æ¨™é”æˆæ–¹é¢æœ‰å„ªç•°è¡¨ç¾ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å€‹äººç‰¹è³ª', title: 'å„ªç§€å®ˆæ™‚è€…', text: 'æº–æ™‚å®Œæˆä»»å‹™ã€ä¸Šèª²æˆ–åƒèˆ‡æ´»å‹•ï¼Œå±•ç¾å‡ºè‰¯å¥½çš„æ™‚é–“ç®¡ç†å’Œå®ˆæ™‚çš„åƒ¹å€¼è§€ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                // äººéš›é—œä¿‚
                { category: 'äººéš›é—œä¿‚', title: 'å‹å–„å¤§ä½¿', text: 'ä¿ƒé€²å‹èª¼ã€é—œæ‡·ä»–äººæˆ–è§£æ±ºè¡çªæ–¹é¢è¡¨ç¾å„ªç§€ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'äººéš›é—œä¿‚', title: 'æ¨‚æ–¼åŠ©äººç', text: 'æ¨‚æ–¼å¹«åŠ©ä»–äººï¼Œé¡˜æ„ä¼¸å‡ºæ´æ‰‹ï¼Œé—œå¿ƒåŒå­¸ã€è€å¸«æˆ–ä»–äººçš„éœ€æ±‚ï¼Œå±•ç¾å‡ºè‰²çš„åŒç†å¿ƒå’Œé—œæ‡·ä¹‹å¿ƒï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'äººéš›é—œä¿‚', title: 'ç¤¾äº¤å† è»', text: 'åœ¨ç¤¾äº¤å ´åˆä¸­å±•ç¾å‡ºè‰²çš„æºé€šèƒ½åŠ›å’Œäººéš›æŠ€å·§ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'äººéš›é—œä¿‚', title: 'å¿ƒéˆå°åœ’ä¸', text: 'é—œæ‡·åŒå­¸æˆ–æä¾›å¹«åŠ©æ–¹é¢æœ‰ç©æ¥µè¡¨ç¾ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'äººéš›é—œä¿‚', title: 'æœªä¾†å°é ˜è¢–', text: 'å±•ç¾é ˜å°æ½›åŠ›ã€ç©æ¥µå½±éŸ¿åŠ›å’Œæœªä¾†ç™¼å±•å‰æ™¯ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                // å¤šå…ƒæ‰è—
                { category: 'å¤šå…ƒæ‰è—', title: 'é–±è®€å°å°‡', text: 'å°æ›¸ç±æœ‰æ¿ƒåšèˆˆè¶£ï¼Œä¸¦ç©æ¥µåƒèˆ‡é–±è®€æ´»å‹•ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'æœ€å¼·é‹å‹•å“¡', text: 'åœ¨é«”è‚²é‹å‹•æ–¹é¢è¡¨ç¾å‡ºè‰²ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'è¡¨æ¼”ä¹‹æ˜Ÿ', text: 'åœ¨èˆå°è¡¨æ¼”ã€éŸ³æ¨‚æ¼”å¥æˆ–èˆè¹ˆé ˜åŸŸè¡¨ç¾çªå‡ºï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'å¥åº·é£Ÿå°šç', text: 'åœ¨é£²é£Ÿå¥åº·ã€é£Ÿç‰©ç‡Ÿé¤Šæˆ–çƒ¹é£ªæœ‰å„ªç§€çš„æŠ€èƒ½ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'è¨­è¨ˆå°é”äºº', text: 'åœ¨è¨­è¨ˆã€æ‰‹ç¹ªæˆ–å‰µæ„è£½ä½œæ–¹é¢æœ‰å„ªç§€è¡¨ç¾ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'ç¶ æ‰‹æŒ‡ç', text: 'åœ¨æ ¡åœ’åœ’è—ã€æ¤ç‰©æ ½åŸ¹æˆ–ç’°å¢ƒç¾åŒ–æ–¹é¢æœ‰çªå‡ºè²¢ç»ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'ç§‘æŠ€å°é”äºº', text: 'åœ¨é›»å­è¨­å‚™ã€ç§‘æŠ€æ‡‰ç”¨æˆ–å‰µæ–°ç™¼æ˜æ–¹é¢è¡¨ç¾å‡ºè‰²ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'èªè¨€å°é”äºº', text: 'å°èªè¨€å­¸ç¿’æœ‰ç†±æƒ…ï¼Œä¸¦åœ¨å­¸ç¿’å¤–èªæˆ–å£èªè¡¨é”æ–¹é¢è¡¨ç¾å„ªç•°ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'å‰µæ„å¯«ä½œç‹', text: 'åœ¨å‰µä½œæ•…äº‹ã€è©©æ­Œæˆ–çŸ­æ–‡æ–¹é¢å±•ç¾å‡ºè‰²ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'è³‡è¨Šæœå°‹é”äºº', text: 'åœ¨ç¶²è·¯ä¸Šèƒ½å¿«é€Ÿã€ç²¾æº–åœ°æ‰¾åˆ°æ‰€éœ€è³‡è¨Šçš„èƒ½åŠ›ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'èªªæ›¸é”äºº', text: 'åœ¨æ•…äº‹å¯«ä½œã€å£è¿°æ•…äº‹æˆ–æ•˜è¿°æ–¹é¢æœ‰å„ªç•°è¡¨ç¾ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'éŠæˆ²è¨­è¨ˆç', text: 'åœ¨éŠæˆ²è¨­è¨ˆã€ç­–åŠƒæˆ–å‰µé€ æ–¹é¢æœ‰ç¨ç‰¹è¦‹è§£ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'æ•™å­¸åŠ©ç†ç', text: 'åœ¨å”åŠ©æ•™å­¸ã€è¼”å°åŒå­¸æˆ–è§£ç­”å•é¡Œæ–¹é¢æœ‰çªå‡ºè²¢ç»ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'æ€è¾¯å“²å­¸å®¶', text: 'åœ¨æ€è¾¯ã€æå‡ºå•é¡Œæˆ–å“²å­¸æ€è€ƒæ–¹é¢æœ‰æ·±å…¥æ¢ç´¢ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å¤šå…ƒæ‰è—', title: 'ç‰¹æ®Šæ‰èƒ½ç', text: 'æ“æœ‰ç‰¹æ®Šæ‰èƒ½æˆ–æŠ€èƒ½ï¼Œè¡¨ç¾å‡ºçœ¾ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                // å…¶ä»–
                { category: 'å…¶ä»–', title: 'ç¶œåˆé€²æ­¥ç', text: 'åœ¨å¤šæ–¹é¢å±•ç¾é€²æ­¥ï¼Œè¡¨ç¾å‡ºå…¨é¢çš„å­¸ç¿’æ…‹åº¦å’Œæˆé•·ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å…¶ä»–', title: 'å‹•ç‰©å‹å–„ç', text: 'å°å‹•ç‰©ä¿è­·ã€é—œæ‡·æˆ–é‡ç”Ÿå‹•ç‰©æœ‰ç‰¹åˆ¥çš„ç†±æƒ…å’Œé—œæ³¨ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å…¶ä»–', title: 'æœ€ä½³ç¾©å·¥', text: 'ç©æ¥µåƒèˆ‡ç¾©å·¥æ´»å‹•ï¼Œç‚ºç¤¾å€æˆ–æ ¡åœ’åšå‡ºå“è¶Šè²¢ç»ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å…¶ä»–', title: 'æ°´æºå°å°–å…µ', text: 'å°ç¯€æ°´ã€ä¿è­·æ°´è³‡æºæˆ–å€¡å°æ°´è³‡æºå¾ªç’°åˆ©ç”¨æœ‰é‡è¦è²¢ç»ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
                { category: 'å…¶ä»–', title: 'æ„›è­·åœ°çƒç', text: 'åœ¨ç’°ä¿ã€æ°¸çºŒç™¼å±•æˆ–æ„›è­·åœ°çƒè¡Œå‹•ä¸­æœ‰ç©æ¥µåƒèˆ‡ï¼Œå€¼å¾—å˜‰è¨±ï¼' },
            ];

            const templates = [
                // 1. ç¶“å…¸æ¦®è­½ (æ”¹ç‚ºé»‘é«”)
                { id: 'classic', name: 'ç¶“å…¸æ¦®è­½', bgImage: null, bg: '#ffffff', border: '#1e40af', font: 'sans-serif', textColor: '#1e3a8a', accent: '#fbbf24', highlight: '#b45309' },
                // 2. æº«é¦¨å¹¾ä½• (ä¿®æ­£å¹¾ä½•åœ–æ¡ˆ)
                { id: 'warm', name: 'æº«é¦¨å¹¾ä½•', bgImage: null, bg: '#fef3c7', border: '#d97706', font: 'sans-serif', textColor: '#78350f', accent: '#f59e0b', highlight: '#ea580c' },
                // 3. ç¹½ç´›æ˜Ÿç©º (æ·±è‰²åº•)
                { id: 'starry', name: 'ç¹½ç´›æ˜Ÿç©º', bgImage: null, bg: '#0f172a', border: '#38bdf8', font: 'sans-serif', textColor: '#f0f9ff', accent: '#fbbf24', highlight: '#fcd34d' },
                // 4. ç²‰å«©å¯æ„›
                { id: 'cute', name: 'ç²‰å«©å¯æ„›', bgImage: null, bg: '#fff1f2', border: '#be123c', font: 'sans-serif', textColor: '#881337', accent: '#fda4af', highlight: '#db2777' },
                // 5. è‡ªç„¶æ¸…æ–° (æ”¹ç‚ºé»‘é«”)
                { id: 'nature', name: 'è‡ªç„¶æ¸…æ–°', bgImage: null, bg: '#f0fdf4', border: '#15803d', font: 'sans-serif', textColor: '#14532d', accent: '#86efac', highlight: '#16a34a' },
                // 6. å…¸é›…è³ªæ„Ÿ (ä¿ç•™è¥¯ç·šé«”)
                { id: 'elegant', name: 'å…¸é›…è³ªæ„Ÿ', bgImage: null, bg: '#faf5ff', border: '#7e22ce', font: 'serif', textColor: '#581c87', accent: '#d8b4fe', highlight: '#9333ea' }
            ];

            useEffect(() => {
                if (mode === 'single') {
                    setAiPrompt(`è«‹æ‰®æ¼”ä¸€ä½æº«æš–çš„åœ‹å°ç­å°å¸«ï¼Œé‡å°å­¸ç”Ÿã€Œ${studentName}ã€ç²å¾—ã€Œ${awardTitle}ã€é€™å€‹çé …ï¼Œå¯«ä¸€æ®µç´„ 50 å­—çš„é¼“å‹µè©•èªã€‚èªæ°£è¦æ­£å‘ã€å…·é«”ï¼Œä¸¦èƒ½å¢å¼·å­¸ç”Ÿçš„è‡ªä¿¡å¿ƒã€‚è«‹ç›´æ¥çµ¦æˆ‘è©•èªå…§å®¹å³å¯ã€‚`);
                } else {
                    setAiPrompt(`è«‹æ‰®æ¼”ä¸€ä½è³‡æ·±æ•™å¸«ã€‚æˆ‘æœƒæä¾›ä¸€ä»½å­¸ç”Ÿåå–®èˆ‡ç‰¹è³ªã€‚è«‹ç‚ºæ¯ä¸€ä½å­¸ç”Ÿæ’°å¯«ç´„ 50 å­—çš„æœŸæœ«è©•èªã€‚
é‡è¦è¦å‰‡ï¼š
1. èªæ°£æº«æš–ã€æ­£å‘ã€‚
2. è«‹åš´æ ¼éµå®ˆã€ŒCSV æ ¼å¼ã€è¼¸å‡ºï¼Œä¸è¦æœ‰è¡¨é ­ï¼Œä¸è¦æœ‰ç·¨è™Ÿã€‚
3. ã€é‡è¦ã€‘è«‹å°‡çµæœæ”¾å…¥ã€Œç¨‹å¼ç¢¼å€å¡Š (Code Block)ã€ä¸­ï¼Œä»¥ä¾¿æˆ‘è¤‡è£½ã€‚
4. æ¯ä¸€è¡Œæ ¼å¼ç‚ºï¼šå­¸ç”Ÿå§“å,çé …åç¨±,è©•èªå…§å®¹

å­¸ç”Ÿåå–®å¦‚ä¸‹ï¼š
(è«‹åœ¨æ­¤è²¼ä¸Šæ‚¨çš„å­¸ç”Ÿåå–®ï¼Œä¾‹å¦‚ï¼šç‹å°æ˜, ç†±å¿ƒåŠ©äºº)`);
                }
            }, [mode, studentName, awardTitle]);

            useEffect(() => {
                if (mode === 'batch' && batchData.length > 0) {
                    const current = batchData[currentBatchIndex];
                    setStudentName(current.name);
                    setAwardTitle(current.award);
                    setComment(current.comment);
                }
            }, [mode, batchData, currentBatchIndex]);

            const parseCSV = (text) => {
                let cleanText = text.replace(/```csv/g, '').replace(/```/g, '');
                const lines = cleanText.trim().split(/\r\n|\n|\r/);
                const data = [];
                lines.forEach(line => {
                    if (!line.trim()) return;
                    const parts = line.split(',');
                    if (parts.length >= 2) {
                        data.push({
                            name: parts[0].trim(),
                            award: parts[1].trim(),
                            comment: parts.slice(2).join(',').trim() || 'è¡¨ç¾å„ªç•°ï¼Œç‰¹æ­¤å˜‰çï¼'
                        });
                    }
                });
                return data;
            };

            const handleCsvImport = () => {
                const data = parseCSV(csvInput);
                if (data.length > 0) {
                    setBatchData(data);
                    setCurrentBatchIndex(0);
                    alert(`æˆåŠŸåŒ¯å…¥ ${data.length} ä½å­¸ç”Ÿè³‡æ–™ï¼è«‹ä½¿ç”¨å³å´é è¦½å€ä¸‹æ–¹çš„æŒ‰éˆ•é€ä¸€ä¸‹è¼‰ã€‚`);
                } else {
                    alert('ç„¡æ³•è­˜åˆ¥è³‡æ–™ï¼Œè«‹ç¢ºèªæ ¼å¼ã€‚å»ºè­°ä½¿ç”¨ AI å¹«æ‚¨ç”¢ç”Ÿæ¨™æº–æ ¼å¼ã€‚');
                }
            };

            const copyPrompt = () => {
                const textArea = document.createElement("textarea");
                textArea.value = aiPrompt;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert('æŒ‡ä»¤å·²è¤‡è£½ï¼');
                } catch (err) {
                    console.error('è¤‡è£½å¤±æ•—', err);
                }
                document.body.removeChild(textArea);
            };

            const applyPreset = (preset) => {
                setAwardTitle(preset.title);
                setComment(preset.text);
                setShowPresets(false);
            };

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                const template = templates.find(t => t.id === selectedTemplate) || templates[0];

                canvas.width = 1200;
                canvas.height = 800;

                const drawTextContent = () => {
                    ctx.textAlign = 'center';
                    ctx.font = `bold 80px ${template.font}`;
                    ctx.fillStyle = template.textColor;
                    ctx.fillText('æ¦® è­½ ç‹€', canvas.width / 2, 180);
                    
                    // Award Title with Highlight color
                    ctx.font = `bold 75px ${template.font}`;
                    ctx.fillStyle = template.highlight;
                    ctx.fillText(awardTitle, canvas.width / 2, 320);
                    
                    ctx.font = `50px ${template.font}`;
                    ctx.fillStyle = template.textColor;
                    ctx.fillText(`èŒ²çå‹µ ${studentName} åŒå­¸`, canvas.width / 2, 440);
                    ctx.font = `40px ${template.font}`;
                    ctx.fillStyle = template.textColor;
                    const maxWidth = 800;
                    const words = comment.split('');
                    let line = '';
                    let y = 500;
                    const lineHeight = 60;
                    for(let n = 0; n < words.length; n++) {
                        const testLine = line + words[n];
                        const metrics = ctx.measureText(testLine);
                        if (metrics.width > maxWidth && n > 0) {
                            ctx.fillText(line, canvas.width / 2, y);
                            line = words[n];
                            y += lineHeight;
                        } else {
                            line = testLine;
                        }
                    }
                    ctx.fillText(line, canvas.width / 2, y);
                    
                    // åº•éƒ¨è³‡è¨Šå¾€ä¸Šèª¿æ•´ (y: canvas.height - 90)
                    ctx.font = `30px ${template.font}`;
                    
                    // å°å¸«æ¬„ä½ï¼šæœ‰å¡«æ‰é¡¯ç¤º
                    if (teacherName && teacherName.trim() !== '') {
                        ctx.textAlign = 'left';
                        ctx.fillText(`å°å¸«ï¼š${teacherName}`, 80, canvas.height - 90);
                    }

                    ctx.textAlign = 'right';
                    ctx.fillText(`æ—¥æœŸï¼š${date.replace(/-/g, '.')}`, canvas.width - 80, canvas.height - 90);
                    
                    // ç§»é™¤ Powered by æµ®æ°´å°
                };

                if (template.bgImage) {
                    const img = new Image();
                    img.crossOrigin = "anonymous";
                    img.src = template.bgImage;
                    img.onload = () => {
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        drawTextContent();
                    };
                    img.onerror = () => {
                        console.warn("ä½¿ç”¨é è¨­æ¨£å¼");
                        drawDefaultBackground();
                        drawTextContent();
                    };
                } else {
                    drawDefaultBackground();
                    drawTextContent();
                }

                function drawDefaultBackground() {
                    ctx.fillStyle = template.bg;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.lineWidth = 20;
                    ctx.strokeStyle = template.border;
                    ctx.strokeRect(40, 40, canvas.width - 80, canvas.height - 80);
                    
                    if (template.id === 'classic') {
                        ctx.fillStyle = template.accent;
                        ctx.beginPath(); ctx.arc(100, 100, 30, 0, 2 * Math.PI); ctx.fill();
                        ctx.beginPath(); ctx.arc(canvas.width - 100, canvas.height - 100, 30, 0, 2 * Math.PI); ctx.fill();
                    } else if (template.id === 'warm') { // æº«é¦¨å¹¾ä½• - ä¿®æ­£ç‚ºè§’è½è£é£¾ï¼Œæ¸›å°‘æ•¸é‡
                        ctx.fillStyle = '#fcd34d'; 
                        
                        // å·¦ä¸Šè§’è£é£¾
                        ctx.beginPath(); ctx.arc(0, 0, 150, 0, 2 * Math.PI); ctx.fill();
                        ctx.beginPath(); ctx.arc(160, 40, 30, 0, 2 * Math.PI); ctx.fill();
                        
                        // å³ä¸‹è§’è£é£¾
                        ctx.beginPath(); ctx.arc(canvas.width, canvas.height, 180, 0, 2 * Math.PI); ctx.fill();
                        ctx.beginPath(); ctx.arc(canvas.width - 200, canvas.height - 50, 20, 0, 2 * Math.PI); ctx.fill();
                        
                        // å³ä¸Šå°é»ç¶´
                        ctx.beginPath(); ctx.arc(canvas.width - 50, 50, 40, 0, 2 * Math.PI); ctx.fill();
                        
                        // å·¦ä¸‹å°é»ç¶´
                        ctx.beginPath(); ctx.arc(50, canvas.height - 50, 40, 0, 2 * Math.PI); ctx.fill();

                    } else if (template.id === 'starry') { // ç¹½ç´›æ˜Ÿç©º
                        // æ·±é‚ƒèƒŒæ™¯
                        ctx.fillStyle = template.bg;
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                        
                        // éœ“è™¹é‚Šæ¡†
                        ctx.lineWidth = 4;
                        ctx.strokeStyle = template.border;
                        ctx.strokeRect(30, 30, canvas.width - 60, canvas.height - 60);
                        
                        // ç¹½ç´›è£é£¾
                        const colors = ['#f472b6', '#38bdf8', '#fbbf24', '#a78bfa'];
                        // è§’è½è£é£¾åœ“
                        ctx.fillStyle = colors[0];
                        ctx.beginPath(); ctx.arc(0, 0, 150, 0, 2 * Math.PI); ctx.fill();
                        ctx.fillStyle = colors[1];
                        ctx.beginPath(); ctx.arc(canvas.width, 0, 100, 0, 2 * Math.PI); ctx.fill();
                        ctx.fillStyle = colors[2];
                        ctx.beginPath(); ctx.arc(canvas.width, canvas.height, 150, 0, 2 * Math.PI); ctx.fill();
                        ctx.fillStyle = colors[3];
                        ctx.beginPath(); ctx.arc(0, canvas.height, 100, 0, 2 * Math.PI); ctx.fill();
                        
                        // éš¨æ©Ÿæ˜Ÿé»
                        ctx.fillStyle = '#ffffff';
                        for(let i=0; i<50; i++) {
                            ctx.beginPath();
                            ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, Math.random() * 2, 0, 2 * Math.PI);
                            ctx.fill();
                        }
                    } else if (template.id === 'cute') {
                         ctx.fillStyle = template.accent;
                         for(let i=0; i<6; i++) {
                             const x = 100 + i * 200;
                             ctx.beginPath(); ctx.arc(x, 80, 20, 0, 2*Math.PI); ctx.fill();
                             ctx.beginPath(); ctx.arc(x, canvas.height-80, 20, 0, 2*Math.PI); ctx.fill();
                         }
                    } else if (template.id === 'nature') {
                        ctx.fillStyle = template.accent;
                        ctx.fillRect(0, 0, 150, 150); ctx.fillRect(canvas.width-150, canvas.height-150, 150, 150);
                    } else if (template.id === 'elegant') {
                        ctx.strokeStyle = template.accent; ctx.lineWidth = 5; ctx.strokeRect(60, 60, canvas.width - 120, canvas.height - 120);
                    }
                }
            }, [studentName, awardTitle, comment, selectedTemplate, teacherName, date]);

            const downloadImage = () => {
                const canvas = canvasRef.current;
                const link = document.createElement('a');
                link.download = `${studentName}_${awardTitle}_çç‹€.png`;
                try {
                    link.href = canvas.toDataURL();
                    link.click();
                } catch (e) {
                    alert("ç„¡æ³•ä¸‹è¼‰ï¼šèƒŒæ™¯åœ–å¯èƒ½ä¸æ”¯æ´è·¨ç¶²åŸŸ (CORS)ã€‚");
                }
            };

            return (
                <div className="min-h-screen bg-gray-50 text-gray-800 font-sans">
                    <header className="bg-white shadow-sm border-b border-gray-200 p-4 sticky top-0 z-10">
                        <div className="max-w-6xl mx-auto flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <div className="bg-blue-600 text-white p-2 rounded font-bold text-xl">ç</div>
                                <h1 className="text-xl font-bold tracking-tight hidden md:block">ç­ç´šçç‹€ç”¢ç”Ÿå™¨</h1>
                            </div>
                            <div className="flex bg-gray-100 p-1 rounded-lg">
                                <button onClick={() => setMode('single')} className={`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${mode === 'single' ? 'bg-white shadow text-blue-600' : 'text-gray-500 hover:text-gray-700'}`}>
                                    <Icons.User /> å–®å¼µè£½ä½œ
                                </button>
                                <button onClick={() => setMode('batch')} className={`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${mode === 'batch' ? 'bg-white shadow text-blue-600' : 'text-gray-500 hover:text-gray-700'}`}>
                                    <Icons.Users /> æ‰¹æ¬¡åŒ¯å…¥
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-6xl mx-auto p-4 md:p-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        {/* æ–°å¢æç¤ºæ–‡å­— */}
                        <div className="lg:col-span-12 bg-blue-50 border border-blue-100 rounded-lg p-3 text-sm text-blue-800 flex items-center gap-2">
                            <span>ğŸ’¡</span>
                            <span>å¯é¸æ“‡å–®å¼µè£½ä½œæˆ–è€…æ‰¹æ¬¡åŒ¯å…¥æ¨¡å¼ã€‚å»ºè­°ä»¥æ¡Œæ©Ÿä½¿ç”¨ï¼Œå¯é”æœ€ä½³é è¦½æ•ˆæœã€‚</span>
                        </div>

                        <div className="lg:col-span-5 space-y-6">
                            <section className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4">
                                <h2 className="text-lg font-bold flex items-center gap-2 text-gray-800"><Icons.Calendar /> åŸºæœ¬è³‡æ–™</h2>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">å°å¸«å§“å</label>
                                        <input type="text" value={teacherName} onChange={(e) => setTeacherName(e.target.value)} className="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">é ’ç™¼æ—¥æœŸ</label>
                                        <input type="date" value={date} onChange={(e) => setDate(e.target.value)} className="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" />
                                    </div>
                                </div>
                            </section>

                            {mode === 'single' ? (
                                <section className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4 animate-fadeIn">
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-lg font-bold flex items-center gap-2 mb-2"><Icons.Type /> å­¸ç”Ÿèˆ‡çé …</h2>
                                        <div className="relative">
                                            <button onClick={() => setShowPresets(!showPresets)} className="text-xs bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-bold hover:bg-orange-200 flex items-center gap-1 transition-colors">
                                                <Icons.BookOpen /> é»æˆ‘å¿«é€Ÿå¥—ç”¨ç¯„æœ¬
                                            </button>
                                            {showPresets && (
                                                <div className="absolute right-0 top-full mt-2 w-72 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden max-h-96 overflow-y-auto">
                                                    <div className="p-3 bg-gray-50 border-b border-gray-100 text-xs font-bold text-gray-500">é¸æ“‡å…§å»ºçé …</div>
                                                    {presetAwards.map((p, i) => (
                                                        <button key={i} onClick={() => applyPreset(p)} className="w-full text-left p-3 hover:bg-blue-50 border-b border-gray-100 last:border-0 group">
                                                            <div className="flex items-center justify-between mb-1"><span className="font-bold text-gray-800">{p.title}</span><span className="text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded">{p.category}</span></div>
                                                            <p className="text-xs text-gray-500 line-clamp-2 group-hover:text-blue-700">{p.text}</p>
                                                        </button>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                    <div><label className="block text-sm font-medium text-gray-700 mb-1">å­¸ç”Ÿå§“å</label><input type="text" value={studentName} onChange={(e) => setStudentName(e.target.value)} className="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" /></div>
                                    <div><label className="block text-sm font-medium text-gray-700 mb-1">çé …åç¨±</label><input type="text" value={awardTitle} onChange={(e) => setAwardTitle(e.target.value)} className="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" /></div>
                                    <div>
                                        <div className="flex justify-between items-center mb-1"><label className="block text-sm font-medium text-gray-700">è©•èªå…§å®¹</label><span className="text-xs text-gray-400">{comment.length}/100å­—</span></div>
                                        <textarea rows="3" value={comment} onChange={(e) => setComment(e.target.value)} className="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" />
                                    </div>
                                </section>
                            ) : (
                                <section className="bg-white p-6 rounded-xl shadow-sm border border-blue-200 ring-4 ring-blue-50 space-y-4 animate-fadeIn">
                                    <div className="flex items-center justify-between">
                                        <h2 className="text-lg font-bold flex items-center gap-2 mb-2"><Icons.FileText /> æ‰¹æ¬¡è³‡æ–™åŒ¯å…¥</h2>
                                        <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">Pro åŠŸèƒ½</span>
                                    </div>
                                    <div className="text-sm text-gray-600 mb-2">æ ¼å¼ï¼š<code className="bg-gray-100 px-1 rounded">å§“å,çé …,è©•èª</code></div>
                                    <textarea rows="5" placeholder={`ç‹å°æ˜,ç†±å¿ƒæœå‹™ç,é€™å­¸æœŸä¸»å‹•å¹«å¿™...\næå°è¯,æ•¸å­¸é€²æ­¥ç,æ•¸å­¸æˆç¸¾çªé£›çŒ›é€²...`} value={csvInput} onChange={(e) => setCsvInput(e.target.value)} className="w-full border border-gray-300 rounded-md px-3 py-2 font-mono text-sm focus:ring-2 focus:ring-blue-500 outline-none" />
                                    <button onClick={handleCsvImport} className="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
                                        <Icons.Upload /> åŒ¯å…¥è³‡æ–™
                                    </button>
                                    {batchData.length > 0 && (
                                        <div className="mt-4 p-3 bg-green-50 rounded border border-green-200">
                                            <div className="flex justify-between items-center mb-2">
                                                <span className="text-sm font-bold text-green-800">å·²åŒ¯å…¥ {batchData.length} ç­†</span>
                                                <span className="text-xs text-green-600">é è¦½ç¬¬ {currentBatchIndex + 1} ä½</span>
                                            </div>
                                            <div className="flex gap-2">
                                                <button disabled={currentBatchIndex === 0} onClick={() => setCurrentBatchIndex(prev => prev - 1)} className="flex-1 bg-white border border-green-300 text-green-700 py-1 rounded disabled:opacity-50 flex justify-center items-center gap-1"><Icons.ChevronLeft /> ä¸Šä¸€å€‹</button>
                                                <button disabled={currentBatchIndex === batchData.length - 1} onClick={() => setCurrentBatchIndex(prev => prev + 1)} className="flex-1 bg-white border border-green-300 text-green-700 py-1 rounded disabled:opacity-50 flex justify-center items-center gap-1">ä¸‹ä¸€å€‹ <Icons.ChevronRight /></button>
                                            </div>
                                        </div>
                                    )}
                                </section>
                            )}

                            <div className="bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg border border-purple-100">
                                <div className="flex items-start gap-3">
                                    <div className="bg-purple-100 p-2 rounded-full shrink-0"><Icons.Sparkles className="text-purple-600" /></div>
                                    <div className="w-full">
                                        <h3 className="text-sm font-bold text-purple-900 mb-1">{mode === 'batch' ? 'AI æ‰¹æ¬¡æŒ‡ä»¤ç”¢ç”Ÿå™¨' : 'AI è©•èªéˆæ„ŸåŠ©æ‰‹'}</h3>
                                        <p className="text-xs text-purple-700 mb-2">æ‚¨å¯ä»¥ç›´æ¥ç·¨è¼¯ä¸‹æ–¹çš„æŒ‡ä»¤ï¼Œä¿®æ”¹æˆæ‚¨å–œæ­¡çš„èªæ°£ï¼Œå†è¤‡è£½çµ¦ AIã€‚</p>
                                        <textarea value={aiPrompt} onChange={(e) => setAiPrompt(e.target.value)} className="w-full h-24 text-xs p-2 border border-purple-200 rounded bg-white/80 focus:ring-2 focus:ring-purple-400 outline-none mb-2 font-mono" />
                                        <div className="flex items-center justify-between">
                                            <span className="text-[10px] text-purple-500">{mode === 'batch' ? 'æç¤ºï¼šè¤‡è£½å¾Œå‰å¾€ ChatGPT / Gemini è²¼ä¸Šã€‚å¯æä¾›å­¸ç”Ÿåå–®èˆ‡ç‰¹è³ª' : 'æç¤ºï¼šè¤‡è£½å¾Œå‰å¾€ ChatGPT / Gemini è²¼ä¸Šå³å¯ã€‚'}</span>
                                            <button onClick={copyPrompt} className="flex items-center gap-1 text-xs bg-purple-600 hover:bg-purple-700 text-white px-3 py-1.5 rounded transition-colors shadow-sm whitespace-nowrap"><Icons.Copy /> è¤‡è£½æŒ‡ä»¤</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <section className="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                                <h2 className="text-lg font-bold flex items-center gap-2 mb-4"><Icons.Layout /> é¸æ“‡çç‹€é¢¨æ ¼</h2>
                                <div className="grid grid-cols-3 gap-3">
                                    {templates.map((t) => (
                                        <button key={t.id} onClick={() => setSelectedTemplate(t.id)} className={`relative group aspect-square rounded-lg border-2 transition-all flex flex-col items-center justify-center p-2 text-center ${selectedTemplate === t.id ? 'border-blue-600 bg-blue-50' : 'border-gray-200 hover:border-blue-300 hover:bg-gray-50'}`}>
                                            <div className={`w-8 h-8 rounded-full mb-2 border`} style={{background: t.bg, borderColor: t.border}}></div>
                                            <span className="text-xs font-medium">{t.name}</span>
                                            {t.id === selectedTemplate && (<div className="absolute -top-2 -right-2 bg-blue-600 text-white rounded-full p-0.5"><Icons.CheckCircle /></div>)}
                                        </button>
                                    ))}
                                </div>
                            </section>
                        </div>

                        <div className="lg:col-span-7 space-y-6">
                            <div className="sticky top-24">
                                <div className="bg-gray-800 rounded-xl p-4 shadow-2xl">
                                    <div className="flex justify-between items-center text-gray-400 text-sm mb-2 px-2">
                                        <span className="flex items-center gap-2"><Icons.ImageIcon /> å³æ™‚é è¦½æ•ˆæœ</span>
                                        <span>1200 x 800 px</span>
                                    </div>
                                    <div className="relative w-full aspect-[3/2] bg-gray-900 rounded-lg overflow-hidden border-2 border-gray-700">
                                        <canvas ref={canvasRef} className="w-full h-full object-contain" />
                                    </div>
                                    <p className="text-center text-gray-500 text-xs mt-4">
                                        * åœ–ç‰‡ç”Ÿæˆæ–¼æ‚¨çš„è£ç½®ç«¯ï¼Œä¸æœƒä¸Šå‚³è‡³ä¼ºæœå™¨ã€‚
                                        {mode === 'batch' && <span className="text-yellow-500 block mt-1">æ‰¹æ¬¡æ¨¡å¼æç¤ºï¼šè«‹ä½¿ç”¨ã€Œä¸Šä¸€å€‹/ä¸‹ä¸€å€‹ã€æŒ‰éˆ•æª¢è¦–æ¯ä½å­¸ç”Ÿï¼Œä¸¦é€ä¸€ä¸‹è¼‰ã€‚</span>}
                                    </p>
                                </div>
                                
                                <button onClick={downloadImage} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2 transform active:scale-95 mt-4">
                                    <Icons.Download /> {mode === 'batch' ? `ä¸‹è¼‰ç›®å‰çš„çç‹€` : 'ä¸‹è¼‰åœ–ç‰‡'}
                                </button>

                                <div className="mt-6 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl border border-blue-100 p-6 shadow-sm">
                                    <div className="flex items-start gap-4">
                                        <img src="https://flipedu-cdn.parenting.com.tw/upload/dOQPJDDXHeEpBqroLGDhPu7iFYHnX2EVsYcg9hPo.png" className="w-24 h-auto rounded-lg shadow-sm hidden md:block" alt="æ•™å­¸è³‡æºå°é¢" />
                                        <div className="flex-1">
                                            <h3 className="font-bold text-lg text-gray-900 flex items-center gap-2"><Icons.DownloadCloud /> æ²’ç©ºä¸€å€‹å€‹åšï¼Ÿç›´æ¥ä¸‹è¼‰ 30 æ¬¾æ¨¡æ¿åŒ…ï¼</h3>
                                            <p className="text-sm text-gray-600 mt-2 leading-relaxed">
                                                ç¿»è½‰æ•™è‚²å·²ç‚ºæ‚¨æº–å‚™å¥½ã€Œ30 ç¨®ç­ç´šç¶“ç‡Ÿè¶£å‘³çç‹€ã€æ‡¶äººåŒ…ï¼ŒåŒ…å« PDF æª”èˆ‡å¯ç·¨è¼¯çš„ Canva æ¨¡æ¿ã€‚
                                            </p>
                                            <div className="flex flex-wrap gap-3 mt-4">
                                                <a href="https://flipedu.parenting.com.tw/teacher_resource/345?from=class_certificate" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-indigo-700 transition-colors shadow-sm">ç«‹å³å‰å¾€ä¸‹è¼‰ <Icons.ArrowRight /></a>
                                                <a href="https://flipedu.parenting.com.tw/teachingScope/45?from=class_certificate" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 bg-white text-indigo-700 border border-indigo-200 px-4 py-2 rounded-lg text-sm font-bold hover:bg-indigo-50 transition-colors">æ›´å¤šæœŸæœ«æ´»å‹•æ•™å­¸è³‡æº</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-yellow-50 border border-yellow-200 rounded-xl p-5 mt-4">
                                    <div className="flex items-center gap-3">
                                        <div className="text-yellow-600">
                                            <Icons.Gift />
                                        </div>
                                        <div className="text-sm text-gray-800">
                                            <span className="font-bold">æ›´å¤šè³‡æºï¼š</span> ç¿»è½‰æ•™è‚²æ•™å­¸è³‡æºå°ˆå€é‚„æœ‰ 500+ ä»½æ•™å­¸ç”¨ç°¡å ±ã€å­¸ç¿’å–®ç­‰ä½ æŒ–æ˜ï¼
                                            <a href="https://flipedu.parenting.com.tw/teacher_resource_list?from=class_certificate" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline ml-1 font-medium">å‰å¾€æ•™å­¸è³‡æºå°ˆå€</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FlipAwardGenerator />);
    </script>
</body>
</html>
